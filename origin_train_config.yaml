# YOLO11训练配置文件
# 根据您的具体需求修改以下参数

# 模型配置
model:
  # 模型类型: yolo11n, yolo11s, yolo11m, yolo11l, yolo11x, yolo12n, yolo12s, yolo12m, yolo12l, yolo12x
  name: "yolo12x"  # 可以改为 "yolo12x" 来训练YOLO12x模型

  # 预训练权重路径 (可选)
  # 如果不指定，将自动下载对应模型的预训练权重
  # pretrained: "path/to/your/pretrained/weights.pt"

# 训练参数配置
training:
  # 基础训练参数
  epochs: 100                    # 训练轮次
  batch_size: 4                 # 批次大小
  image_size: 640                # 图像尺寸
  learning_rate: 0.01            # 初始学习率
  device: "0"                    # 设备: "0"(GPU), "1"(GPU), "cpu" 或 "0,1"(多GPU)
  workers: 4                     # 数据加载线程数

  # 学习率参数
  lrf: 0.01                      # 最终学习率 = lr0 * lrf
  momentum: 0.937                # SGD momentum
  weight_decay: 0.0005           # 权重衰减

  # 预热参数
  warmup_epochs: 3.0             # 预热轮次
  warmup_momentum: 0.8           # 预热期初始momentum
  warmup_bias_lr: 0.1            # 预热期偏置学习率

  # 损失函数权重
  box_loss_gain: 7.5             # 边界框损失权重
  cls_loss_gain: 0.5             # 分类损失权重
  cls_positive_weight: 1.0       # 分类正样本权重
  obj_loss_gain: 1.0             # 目标检测损失权重
  obj_positive_weight: 1.0       # 目标检测正样本权重

  # IoU和阈值参数
  iou_threshold: 0.2             # IoU训练阈值
  anchor_threshold: 4.0          # 锚点阈值
  focal_gamma: 0.0               # Focal loss gamma (0表示禁用)

  # 其他训练参数
  save_period: 50                # 每隔多少轮保存一次检查点
  cache: "ram"                   # 数据缓存: "ram", "disk", 或 False
  exist_ok: false                # 是否覆盖已存在的实验目录
  resume: false                  # 是否恢复训练
  verbose: true                  # 详细输出
  evaluate: true                 # 训练后评估模型

  # 实验名称
  experiment_name: "yolo12x_experiment"  # 实验名称，用于保存结果

  # 优化器和调度器参数
  optimizer: "auto"              # 优化器: "SGD", "Adam", "AdamW", 或 "auto"
  patience: 50                   # 早停耐心值 (多少轮无改善后停止)
  plots: true                    # 是否生成训练图表
  rect: false                    # 是否使用矩形训练

  # 模型保存参数
  save_json: false               # 是否保存COCO格式的评估结果
  save_hybrid: false             # 是否保存混合版本标签

  # 验证参数
  val: true                      # 是否在训练期间验证
  val_conf_threshold: 0.001      # 验证时的置信度阈值
  val_iou_threshold: 0.6         # 验证时的IoU阈值

  # 传输学习参数
  freeze: false                  # 是否冻结层 (可以是数字或层名称)
  multi_scale: false             # 是否使用多尺度训练

# 数据增强配置
augmentation:
  # HSV增强
  hsv_h: 0.015                   # 色调增强范围
  hsv_s: 0.7                     # 饱和度增强范围
  hsv_v: 0.4                     # 明度增强范围

  # 几何变换
  degrees: 0.0                   # 旋转角度范围 (度)
  translate: 0.1                 # 平移范围
  scale: 0.5                     # 缩放范围
  shear: 0.0                     # 剪切角度范围 (度)
  perspective: 0.0               # 透视变换范围

  # 翻转
  flipud: 0.0                    # 上下翻转概率
  fliplr: 0.5                    # 左右翻转概率

  # 混合增强
  mosaic: 1.0                    # Mosaic增强概率
  mixup: 0.0                     # Mixup增强概率

# 类别特定强化参数
# 类别ID从0开始，对应数据集yaml文件中的names顺序
# 如果某个类别的ID在数据集中不存在，该参数将被自动跳过
class_specific:
  # 示例: 对类别0 (person) 进行强化训练
  0:
    # 该类别的损失权重增强 (1.0表示正常，2.0表示加倍)
    loss_weight: 2.0

    # 该类别的数据增强强度倍数
    augmentation_scale: 1.5

    # 该类别的最小样本权重 (用于类别不平衡)
    min_samples_weight: 1.2

    # 该类别特殊的学习率倍数
    lr_multiplier: 1.0

  # 示例: 对类别1 (motorcycle) 进行强化训练
  1:
    loss_weight: 1.5
    augmentation_scale: 1.2
    min_samples_weight: 1.0
    lr_multiplier: 1.0

  # 示例: 对类别3进行强化 (如果数据集中没有类别3，此配置将被跳过)
  # 3:
  #   loss_weight: 3.0
  #   augmentation_scale: 2.0
  #   min_samples_weight: 1.5
  #   lr_multiplier: 0.8

# 数据集配置
dataset:
  # 数据集YAML文件路径
  # 程序会自动读取该文件获取类别信息
  dataset_yaml: "F:\\wenw\\work\\dataset\\Infrared_dataset_yolo\\dataset.yaml"

  # 数据集根目录 (可选，用于验证路径)
  root_path: "F:\\wenw\\work\\dataset\\Infrared_dataset_yolo"

# 高级配置 (可选)
advanced:
  # 多GPU训练参数
  multi_gpu:
    enabled: false                # 是否启用多GPU训练
    sync_bn: true                 # 是否使用同步BatchNorm

  # 混合精度训练
  mixed_precision:
    enabled: true                 # 是否启用混合精度训练

  # 梯度裁剪
  grad_clip:
    enabled: false                # 是否启用梯度裁剪
    max_norm: 10.0               # 最大梯度范数

  # 早停参数
  early_stopping:
    enabled: false                # 是否启用早停
    patience: 50                 # 容忍轮次
    min_delta: 0.001             # 最小改善幅度